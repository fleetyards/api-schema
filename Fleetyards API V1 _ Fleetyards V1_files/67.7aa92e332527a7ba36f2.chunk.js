(self.webpackJsonp=self.webpackJsonp||[]).push([[67],{2234:function(e,t,o){"use strict";o.r(t),o.d(t,"tryGetExportedNodeInfo",(function(){return Qt.g})),o.d(t,"computeNodeEdges",(function(){return Qt.c})),o.d(t,"computeNodeEdge",(function(){return Qt.b})),o.d(t,"computeModelEdges",(function(){return Qt.a})),o.d(t,"computeOas3Edges",(function(){return Qt.e})),o.d(t,"computeOas2Edges",(function(){return Qt.d})),o.d(t,"findMostRelevantNodeUri",(function(){return Qt.f})),o.d(t,"transformNodeService",(function(){return h})),o.d(t,"computeAddedNodes",(function(){return Ft.a})),o.d(t,"computeDeletedNodeUris",(function(){return Ft.c})),o.d(t,"computeDeletedNode",(function(){return Ft.b})),o.d(t,"computeModifiedNodes",(function(){return Ft.d})),o.d(t,"getNodeUriParts",(function(){return Ft.m})),o.d(t,"transformNodeInstances",(function(){return Ft.n})),o.d(t,"getNodeUri",(function(){return Ft.l})),o.d(t,"getNodeBaseUri",(function(){return Ft.e})),o.d(t,"getNodeFormat",(function(){return Ft.g})),o.d(t,"getNodeSpec",(function(){return Ft.j})),o.d(t,"getNodeSummary",(function(){return Ft.k})),o.d(t,"getNodeData",(function(){return Ft.f})),o.d(t,"getNodeParsed",(function(){return Ft.i})),o.d(t,"getNodeInternal",(function(){return Ft.h})),o.d(t,"SemverLevel",(function(){return m})),o.d(t,"Semver",(function(){return v})),o.d(t,"NodeTypeEnumMap",(function(){return It.d})),o.d(t,"NodeSpecEnumMap",(function(){return It.c})),o.d(t,"Format",(function(){return It.b})),o.d(t,"EdgeType",(function(){return It.a})),o.d(t,"doAnalyze",(function(){return Et})),o.d(t,"initSdk",(function(){return Vt})),o.d(t,"analyze",(function(){return Wt})),o.d(t,"push",(function(){return Kt}));var r=o(73),a=o(18),d=o(13),n=o(2345),s=o(35),p=o(186),i=o(2204),c=o(2088),u=o(2186),l=o(2184);const h=(e,t)=>{let o=e;return"string"==typeof e&&(o=Object(p.parse)(e)),"oas2"===t?Object(u.transformOas2Service)({document:o}):Object(l.transformOas3Service)({document:o})};var m,v,b=o(2382);!function(e){e[e.Unknown=1]="Unknown",e[e.Patch=2]="Patch",e[e.Minor=3]="Minor",e[e.Major=4]="Major"}(m||(m={})),function(e){e.Major="major",e.Minor="minor",e.Patch="patch",e.Unknown="unknown"}(v||(v={}));const R=(e,t,...o)=>{const r=[];for(const a of o){if(!a.selector)continue;if(!a.selector(e,t))continue;const o=a.calculate(e,t);r.push(o)}if(r.length)return r},y={selector:(e,t)=>t.op===n.b.Remove&&e.op===n.b.Add&&"string"==typeof e.value||e.op===n.b.Remove&&t.op===n.b.Add&&"string"==typeof t.value||e.op===n.b.Replace&&t.op===n.b.Replace&&"string"==typeof e.value&&"string"==typeof t.value,calculate:e=>{const t=g[f.Modified],o=v[m[t]];return{code:c.a.Text,operation:n.b.Replace,level:t,semver:o,path:e.path,message:"updated article"}}};var f;!function(e){e.Modified="modified"}(f||(f={}));const g={[f.Modified]:m.Patch},A={selector:()=>!0,calculate:(e,t)=>({code:c.a.Unknown,context:c.b.Unknown,level:m.Patch,semver:v.Patch,operation:n.b.Test,path:"/",message:"updated",data:{operation:e,inverse:t}})},q=(e,t)=>R(e,t,A),$=e=>null!==e&&"[object Object]"===Object.prototype.toString.call(e),M=(e,t)=>null!==e.match(t);var N;!function(e){e.DescriptionAdded="description_added",e.DescriptionRemoved="description_removed",e.DescriptionModified="description_modified"}(N||(N={}));const _={[N.DescriptionAdded]:m.Patch,[N.DescriptionRemoved]:m.Patch,[N.DescriptionModified]:m.Patch},j={selector:e=>e.op===n.b.Add&&M(e.path,/\/description$/)&&"string"==typeof e.value,calculate:e=>{const t=_[N.DescriptionAdded],o=v[m[t]];return{code:c.a.Text,context:c.b.Description,operation:n.b.Add,level:t,semver:o,path:e.path,message:"added description"}}},P={selector:(e,t)=>e.op===n.b.Remove&&M(e.path,/\/description$/)&&t.op===n.b.Add&&M(t.path,/\/description$/)&&"string"==typeof t.value,calculate:e=>{const t=_[N.DescriptionRemoved],o=v[m[t]];return{code:c.a.Text,context:c.b.Description,operation:n.b.Remove,level:t,semver:o,path:e.path,message:"removed description"}}},O={selector:(e,t)=>e.op===n.b.Replace&&M(e.path,/\/description$/)&&"string"==typeof e.value&&t.op===n.b.Replace&&M(t.path,/\/description$/)&&"string"==typeof t.value,calculate:e=>{const t=_[N.DescriptionModified],o=v[m[t]];return{code:c.a.Text,context:c.b.Description,operation:n.b.Replace,level:t,semver:o,path:e.path,message:"updated description"}}},k={selector:e=>e.op===n.b.Add&&M(e.path,/\/required$/)&&Array.isArray(e.value)&&e.value.length>0,calculate:e=>{const t=I[F.RequiredPropertyAdded],o=v[m[t]],r=e.value,a=1===r.length?`property ${r[0]} is required`:`properties ${r.join(", ")} are required`;return{code:c.a.Required,context:c.b.Property,operation:n.b.Add,level:t,semver:o,path:e.path,message:a}}},w={selector:(e,t)=>e.op===n.b.Remove&&M(e.path,/\/required$/)&&t.op===n.b.Add&&M(e.path,/\/required$/),calculate:(e,t)=>{const o=I[F.RequiredPropertyRemoved],r=v[m[o]],a=`properties ${(Array.isArray(t.value)?t.value:[t.value]).join(", ")} are not required`;return{code:c.a.Required,context:c.b.Property,operation:n.b.Remove,level:o,semver:r,path:e.path,message:a}}},x={selector:e=>e.op===n.b.Add&&M(e.path,/\/required\/\d+$/),calculate:e=>{const t=I[F.RequiredPropertyAdded],o=v[m[t]],r=`property ${e.value} is required`;return{code:c.a.Required,context:c.b.Property,operation:n.b.Add,level:t,semver:o,path:e.path,message:r}}},S={selector:(e,t)=>e.op===n.b.Remove&&M(e.path,/\/required\/\d+$/)&&t.op===n.b.Add&&M(e.path,/\/required\/\d+$/),calculate:(e,t)=>{const o=I[F.RequiredPropertyRemoved],r=v[m[o]],a=`property ${t.value} is not required`;return{code:c.a.Required,context:c.b.Property,operation:n.b.Remove,level:o,semver:r,path:e.path,message:a}}},T={selector:(e,t)=>e.op===n.b.Replace&&M(e.path,/\/required\/\d+$/)&&t.op===n.b.Replace&&M(t.path,/\/required\/\d+$/),calculate:(e,t)=>{const o=I[F.RequiredPropertyModified],r=v[m[o]],a=`property ${e.value} is required, property ${t.value} is not required`;return{code:c.a.Required,context:c.b.Property,operation:n.b.Replace,level:o,semver:r,path:e.path,message:a}}},U={selector:(e,t)=>e.op===n.b.Replace&&M(e.path,/\/properties\/[^\/]*$/)&&t.op===n.b.Replace&&M(t.path,/\/properties\/[^\/]*$/),calculate:(e,t)=>{const o=I[F.PropertyNameModified],r=v[m[o]],{path:a}=e,d=e.value,s=t.value,p=G(a),i=`property ${s}${""!==p?" at "+p:""} changed to ${d}`;return{code:c.a.Name,context:c.b.Property,operation:n.b.Replace,level:o,semver:r,path:a,message:i}}},H={selector:(e,t)=>e.op===n.b.Replace&&M(e.path,/\/properties\/[^\/]*\/type$/)&&t.op===n.b.Replace&&M(t.path,/\/properties\/[^\/]*\/type$/),calculate:e=>{const t=I[F.PropertyTypeModified],o=v[m[t]],{path:r}=e,a=e.value,[,d,...s]=G(r).split("/").reverse(),p=G(s.reverse().join("/")),i=`type of property ${d}${""!==p?" at "+p:""} updated to ${a}`;return{code:c.a.Type,context:c.b.Property,operation:n.b.Replace,level:t,semver:o,path:r,message:i}}},D={selector:e=>(e.op===n.b.Replace||e.op===n.b.Add)&&M(e.path,/\/additionalProperties$/)&&void 0!==e.value&&!e.value,calculate:e=>{let t=n.b.Add;e.op===n.b.Replace&&(t=n.b.Replace);const o=I[F.AdditionalPropertiesNotAllowed],r=v[m[o]];return{code:c.a.Additional,context:c.b.Property,operation:t,level:o,semver:r,path:e.path,message:"additional properties not allowed"}}},C={selector:e=>e.op===n.b.Add&&M(e.path,/\/properties\/[^\/]*$/)&&$(e.value),calculate:e=>{const t=I[F.OptionalPropertyAdded],o=v[m[t]],{type:r}=e.value,{path:a}=e,d=a.split("/"),s=d.pop(),p=G(d.join("/")),i=`added property ${s} of type ${r}${""!==p?" at "+p:""}`;return{code:c.a.Optional,context:c.b.Property,operation:n.b.Add,level:t,semver:o,path:e.path,message:i}}},B={selector:(e,t)=>e.op===n.b.Remove&&M(e.path,/\/properties\/[^\/]*$/)&&t.op===n.b.Add&&M(t.path,/\/properties\/[^\/]*$/)&&$(t.value),calculate:(e,t)=>{const o=I[F.OptionalPropertyRemoved],r=v[m[o]],{type:a}=t.value,{path:d}=e,s=d.split("/"),p=s.pop(),i=G(s.join("/")),u=`removed property ${p} of type ${a}${""!==i?" at "+i:""}`;return{code:c.a.Optional,context:c.b.Property,operation:n.b.Remove,level:o,semver:r,path:d,message:u}}},Q={selector:e=>e.op===n.b.Remove||(e.op===n.b.Replace||e.op===n.b.Add)&&M(e.path,/\/additionalProperties$/)&&(void 0===e.value||!1!==e.value),calculate:e=>{let t=n.b.Add;e.op===n.b.Replace&&(t=n.b.Replace),e.op===n.b.Remove&&(t=n.b.Remove);const o=I[F.AdditonalPropertiesAllowed],r=v[m[o]];return{code:c.a.Additional,context:c.b.Property,operation:t,level:o,semver:r,path:e.path,message:"additional properties are allowed"}}};var F;!function(e){e.RequiredPropertyAdded="required_property_added",e.RequiredPropertyRemoved="required_property_removed",e.RequiredPropertyModified="required_property_modified",e.PropertyNameModified="property_name_modified",e.PropertyTypeModified="property_type_modified",e.AdditionalPropertiesNotAllowed="additonal_properties_not_allowed",e.OptionalPropertyAdded="optional_property_added",e.OptionalPropertyRemoved="optional_property_removed",e.AdditonalPropertiesAllowed="additional_properties_allowed",e.DescriptionAdded="description_added",e.DescriptionRemoved="description_removed",e.DescriptionModified="description_Modified"}(F||(F={}));const I={[F.RequiredPropertyAdded]:m.Major,[F.RequiredPropertyRemoved]:m.Major,[F.RequiredPropertyModified]:m.Major,[F.PropertyNameModified]:m.Major,[F.PropertyTypeModified]:m.Major,[F.AdditionalPropertiesNotAllowed]:m.Major,[F.OptionalPropertyAdded]:m.Minor,[F.OptionalPropertyRemoved]:m.Minor,[F.AdditonalPropertiesAllowed]:m.Patch,[F.DescriptionAdded]:m.Patch,[F.DescriptionRemoved]:m.Patch,[F.DescriptionModified]:m.Patch},G=e=>{let t=e.split("/");const o=[];for(;t.length;){const[e,r=""]=t;[,...t]=t,"properties"===e&&"properties"!==r||"items"===e&&!isNaN(parseInt(r))||o.push(e)}return o.join("/")},E=(e,t)=>R(e,t,k,w,x,S,T,U,H,D,C,B,Q,j,P,O),L=(e,t,o)=>{const r=Object.assign(Object.assign({},e),{path:t});return void 0===o||r.op!==n.b.Add&&r.op!==n.b.Replace||(r.value=o),r},z=e=>M(e,/\/contents\/\d+$/),X={selector:e=>e.op===n.b.Add&&z(e.path),calculate:e=>{const t=e.value,{mediaType:o}=t,r="added "+o;return{code:c.a.Content,context:c.b.MediaType,operation:n.b.Add,level:m.Major,semver:v.Major,path:e.path,message:r}}},J={selector:(e,t)=>e.op===n.b.Remove&&z(e.path)&&t.op===n.b.Add,calculate:(e,t)=>{const o=t.value,{mediaType:r}=o;return{code:c.a.Content,context:c.b.MediaType,operation:n.b.Remove,level:m.Minor,semver:v.Minor,path:e.path,message:"removed "+r}}},V={selector:(e,t)=>e.op===n.b.Replace&&z(e.path)&&t.op===n.b.Replace&&z(t.path),calculate:(e,t)=>{const o=e.value,r=t.value;return{code:c.a.Content,context:c.b.MediaType,operation:n.b.Replace,level:m.Major,semver:v.Major,path:e.path,message:`updated ${r.mediaType} to ${o.mediaType}`}}},W=(e,t)=>{let o;if(e.op!==n.b.Add&&e.op!==n.b.Replace||(o=e.value),!Array.isArray(o))return e.path.match(/\/contents\/\d+/)?R(e,t,X,J,V)||E(e,t):void 0;const r=[];for(const a in o){if(!o.hasOwnProperty(a))continue;const d=o[a],n=`${e.path}/${a}`,s=L(e,n,d),p=L(t,n,d),i=R(s,p,X,J,V)||E(s,p);i&&i.length>0&&r.push(...i)}return 0!==r.length?r:void 0},K={selector:e=>e.op===n.b.Add&&M(e.path,/^\/request\/body$/)&&$(e.value),calculate:e=>{const t=e.value,{required:o=!1,contents:r=[]}=t,a=oe[o?te.RequestBodyRequired:te.RequestBodyAdded],d=v[m[a]],s=[];for(const{mediaType:e}of r)s.push(e);return{code:o?c.a.Required:c.a.Optional,context:c.b.RequestBody,operation:n.b.Add,level:a,semver:d,path:e.path,message:`added${o?" required":""} request body${r.length?" for "+s.join(", "):""}`}}},Y={selector:(e,t)=>e.op===n.b.Remove&&M(e.path,/^\/request\/body$/)&&t.op===n.b.Add&&$(t.value),calculate:(e,t)=>{const o=oe[te.RequestBodyRemoved],r=v[m[o]],a=t.value,{required:d=!1,contents:s=[]}=a,p=[];for(const{mediaType:e}of s)p.push(e);return{code:d?c.a.Required:c.a.Optional,context:c.b.RequestBody,operation:n.b.Remove,level:o,semver:r,path:e.path,message:`removed${d?" required":""} request body ${s.length?" for "+p.join(", "):""}`}}},Z={selector:(e,t)=>e.op===n.b.Replace&&M(e.path,/^\/request\/body$/)&&$(e.value)&&t.op===n.b.Replace&&M(t.path,/^\/request\/body$/)&&$(t.value),calculate:e=>{const t=e.value,{required:o=!1,contents:r=[]}=t,a=[];for(const{mediaType:e}of r)a.push(e);const d=o?c.a.Required:c.a.Optional,s=oe[o?te.RequestBodyRequired:te.RequestBodyReplaced],p=v[m[s]];return{code:d,context:c.b.RequestBody,operation:n.b.Replace,level:s,semver:p,path:e.path,message:`updated${o?" required":""} request body${r.length?" for "+a.join(", "):""}`}}},ee={selector:e=>(e.op===n.b.Add||e.op===n.b.Remove||e.op===n.b.Replace)&&M(e.path,/^\/request\/body\/required$/),calculate:e=>{let t=!1;e.op!==n.b.Add&&e.op!==n.b.Replace||!e.value||(t=!0);const o=oe[t?te.RequestBodyRequired:te.RequestBodyNotRequired],r=v[m[o]];return{code:c.a.Required,context:c.b.RequestBody,operation:e.op,level:o,semver:r,path:e.path,message:"body is "+(t?"required":"not required")}}};var te;!function(e){e.RequestBodyAdded="request_body_added",e.RequestBodyRemoved="request_body_removed",e.RequestBodyReplaced="request_body_replaced",e.RequestBodyRequired="request_body_required",e.RequestBodyNotRequired="request_body_not_rquired"}(te||(te={}));const oe={[te.RequestBodyAdded]:m.Minor,[te.RequestBodyRemoved]:m.Minor,[te.RequestBodyReplaced]:m.Minor,[te.RequestBodyRequired]:m.Major,[te.RequestBodyNotRequired]:m.Minor},re=/\/path\/\d+$/,ae=/\/query\/\d+$/,de=/\/headers\/\d+$/,ne=/\/cookie\/\d+$/,se=/\/path\/\d+\/required$/,pe=/\/query\/\d+\/required$/,ie=/\/headers\/\d+\/required$/,ce=/\/cookie\/\d+\/required$/,ue=/\/path\/\d+\/name$/,le=/\/query\/\d+\/name$/,he=/\/headers\/\d+\/name$/,me=/\/cookie\/\d+\/name$/,ve=(e,t)=>e.match(se)||e.match(re)?t?ke.RequiredPathAdded:ke.NotRequiredPathAdded:e.match(pe)||e.match(ae)?t?ke.RequiredQueryAdded:ke.NotRequiredQueryAdded:e.match(ie)||e.match(de)?t?ke.RequiredHeaderAdded:ke.NotRequiredHeaderAdded:e.match(ce)||e.match(ne)?t?ke.RequiredCookieAdded:ke.NotRequiredCookieAdded:c.b.Unknown,be=(e,t)=>e.match(se)||e.match(re)?t?ke.RequiredPathAdded:ke.RequiredPathRemoved:e.match(pe)||e.match(ae)?t?ke.RequiredQueryAdded:ke.RequiredQueryRemoved:e.match(ie)||e.match(de)?t?ke.RequiredHeaderAdded:ke.RequiredHeaderRemoved:e.match(ce)||e.match(ne)?t?ke.RequiredCookieAdded:ke.RequiredCookieRemoved:c.b.Unknown,Re=e=>e.match(/\/path/)?"path":e.match(/\/query/)?"query":e.match(/\/headers/)?"header":e.match(/\/cookie/)?"cookie":"header",ye=e=>e.match(/\/path/)?c.b.Path:e.match(/\/query/)?c.b.Query:e.match(/\/headers/)?c.b.Header:e.match(/\/cookie/)?c.b.Cookie:c.b.Header,fe=e=>M(e,/\/(path|query|headers|cookie)\/\d+$/),ge=e=>M(e,/\/(path|query|headers|cookie)\/\d+\/required$/),Ae=e=>M(e,/\/(path|query|headers|cookie)\/\d+\/name$/),qe={selector:e=>e.op===n.b.Add&&fe(e.path),calculate:e=>{const t=e.value,{required:o=!1,name:r}=t,a=we[ve(e.path,o)],d=v[m[a]],s=ye(e.path),p=Re(e.path),i=o?`added required ${p} ${r}`:`added ${p} ${r}`;return{code:o?c.a.Required:c.a.Optional,context:s,operation:n.b.Add,level:a,semver:d,path:e.path,message:i}}},$e={selector:(e,t)=>e.op===n.b.Remove&&fe(e.path)&&t.op===n.b.Add,calculate:(e,t)=>{const o=we[ke.Removed],r=v[m[o]],a=ye(e.path),d=Re(e.path),s=t.value,{name:p}=s;return{code:c.a.Optional,context:a,operation:n.b.Remove,level:o,semver:r,path:e.path,message:`removed ${d} ${p}`}}},Me={selector:(e,t)=>e.op===n.b.Replace&&fe(e.path)&&t.op===n.b.Replace&&fe(t.path),calculate:e=>{const t=e.value,{required:o=!1,name:r}=t,a=we[be(e.path,o)],d=v[m[a]],s=ye(e.path),p=Re(e.path),i=o?`updated ${p} ${r} is now required`:`updated ${p} ${r} is not required`;return{code:o?c.a.Required:c.a.Optional,context:s,operation:n.b.Replace,level:a,semver:d,path:e.path,message:i}}},Ne={selector:e=>e.op===n.b.Add&&ge(e.path),calculate:e=>{const t=e.value,o=we[ve(e.path,t)],r=v[m[o]],a=ye(e.path),d=Re(e.path);return{code:t?c.a.Required:c.a.Optional,context:a,operation:n.b.Add,level:o,semver:r,path:e.path,message:"added required "+d}}},_e={selector:(e,t)=>e.op===n.b.Remove&&ge(e.path)&&t.op===n.b.Add,calculate:e=>{const t=we[(o=e.path,o.match(se)?ke.RequiredPathRemoved:o.match(pe)?ke.RequiredQueryRemoved:o.match(ie)?ke.RequiredHeaderRemoved:o.match(ce)?ke.RequiredCookieRemoved:c.b.Unknown)];var o;const r=v[m[t]];return{code:c.a.Optional,context:ye(e.path),operation:n.b.Remove,level:t,semver:r,path:e.path,message:"removed required "+Re(e.path)}}},je={selector:(e,t)=>e.op===n.b.Replace&&ge(e.path)&&t.op===n.b.Replace&&ge(t.path),calculate:e=>{const t=e.value,o=we[be(e.path,t)],r=v[m[o]];return{code:t?c.a.Required:c.a.Optional,context:ye(e.path),operation:n.b.Replace,level:o,semver:r,path:e.path,message:`updated required parameter  ${Re(e.path)} to ${t?"required":"not required"}`}}},Pe={selector:e=>e.op===n.b.Add&&Ae(e.path),calculate:e=>{const t=e.value,o=we[(r=e.path,r.match(ue)?ke.PathNameAdded:r.match(le)?ke.QueryNameAdded:r.match(he)?ke.HeaderNameAdded:r.match(me)?ke.CookieNameAdded:c.b.Unknown)];var r;const a=v[m[o]],d=ye(e.path),s=Re(e.path);return{code:c.a.Name,context:d,operation:n.b.Add,level:o,semver:a,path:e.path,message:`added ${t} ${s}`}}},Oe={selector:(e,t)=>e.op===n.b.Replace&&Ae(e.path)&&t.op===n.b.Replace&&Ae(t.path),calculate:(e,t)=>{const o=e.value,r=t.value,a=we[(d=e.path,d.match(ue)?ke.PathNameModified:d.match(le)?ke.QueryNameModified:d.match(he)?ke.HeaderNameModified:d.match(me)?ke.CookieNameModified:c.b.Unknown)];var d;const s=v[m[a]],p=Re(e.path);return{code:c.a.Name,context:ye(e.path),operation:n.b.Replace,level:a,semver:s,path:e.path,message:`updated ${r} ${p} to ${o}`}}};var ke;!function(e){e.AddedRequired="added_requried",e.AddedOptional="added_optional",e.Removed="removed",e.ModifiedRequired="modified_requried",e.ModifiedOptional="modified_optional",e.RequiredPathAdded="required_path_added",e.RequiredQueryAdded="required_query_added",e.RequiredHeaderAdded="required_header_added",e.RequiredCookieAdded="required_cookie_added",e.NotRequiredPathAdded="not_required_path_added",e.NotRequiredQueryAdded="not_required_query_added",e.NotRequiredHeaderAdded="not_required_header_added",e.NotRequiredCookieAdded="not_required_cookie_added",e.RequiredPathRemoved="required_path_removed",e.RequiredQueryRemoved="required_query_removed",e.RequiredHeaderRemoved="required_header_removed",e.RequiredCookieRemoved="required_cookie_removed",e.PathNameAdded="path_name_added",e.QueryNameAdded="query_name_added",e.HeaderNameAdded="header_name_added",e.CookieNameAdded="cookie_name_added",e.PathNameModified="path_name_modified",e.QueryNameModified="query_name_modified",e.HeaderNameModified="header_name_modified",e.CookieNameModified="cookie_name_modified"}(ke||(ke={}));const we={[ke.AddedRequired]:m.Major,[ke.AddedOptional]:m.Minor,[ke.Removed]:m.Minor,[ke.ModifiedRequired]:m.Major,[ke.ModifiedOptional]:m.Minor,[ke.RequiredPathAdded]:m.Major,[ke.RequiredQueryAdded]:m.Major,[ke.RequiredHeaderAdded]:m.Major,[ke.RequiredCookieAdded]:m.Major,[ke.NotRequiredPathAdded]:m.Minor,[ke.NotRequiredQueryAdded]:m.Minor,[ke.NotRequiredHeaderAdded]:m.Minor,[ke.NotRequiredCookieAdded]:m.Minor,[ke.RequiredPathRemoved]:m.Minor,[ke.RequiredQueryRemoved]:m.Minor,[ke.RequiredHeaderRemoved]:m.Minor,[ke.RequiredCookieRemoved]:m.Minor,[ke.PathNameAdded]:m.Minor,[ke.QueryNameAdded]:m.Minor,[ke.HeaderNameAdded]:m.Minor,[ke.CookieNameAdded]:m.Minor,[ke.PathNameModified]:m.Minor,[ke.QueryNameModified]:m.Minor,[ke.HeaderNameModified]:m.Minor,[ke.CookieNameModified]:m.Minor},xe=(e,t)=>R(e,t,qe,$e,Me,Ne,_e,je,Pe,Oe,j,P,O)||W(e,t),Se=(e,t)=>{const{path:o}=e;return o.match(/\/(path|query|headers|cookie)\/\d+$/)||o.match(/\/(path|query|headers|cookie)$/)?Te(e,t):xe(e,t)},Te=(e,t)=>{const o=[];if(e.op===n.b.Add&&t.op===n.b.Remove){const r=De(e);for(const a in r)r.hasOwnProperty(a)&&Ue({operation:e,inverse:t,parameter:r[a],changes:o,index:a})}else if(e.op===n.b.Remove&&t.op===n.b.Add){const r=De(t);for(const a in r)r.hasOwnProperty(a)&&Ue({operation:e,inverse:t,invParameter:r[a],changes:o,index:a})}else if(e.op===n.b.Replace&&t.op===n.b.Replace){const r=De(e),a=De(t);for(const d in r)r.hasOwnProperty(d)&&Ue({operation:e,inverse:t,parameter:r[d],invParameter:a[d],changes:o,index:d})}return o},Ue=({operation:e,inverse:t,parameter:o,invParameter:r,changes:a,index:d})=>{const n=Ce(e.path,d),s=xe(L(e,n,He(o)),L(t,n,He(r)));s&&s.length&&a.push(...s)},He=e=>{if(e)return e.required||(e.required=!1),e},De=e=>$(e.value)?[e.value]:Array.isArray(e.value)?e.value:[],Ce=(e,t)=>{const o=e.split("/");return parseInt(o[o.length-1])>=0?e:`${e}/${t}`},Be=(e,t)=>((e,t)=>R(e,t,K,Y,Z,ee,j,P,O)||W(e,t))(e,t)||Se(e,t),Qe={selector:e=>e.op===n.b.Add&&M(e.path,/\/responses$/)&&Array.isArray(e.value)&&e.value.length>0,calculate:e=>{const t=e.value,o=[];let r=!1;for(const e of t){const{code:t}=e;o.push(t),r||(r=null!==t.match(/^2\d{2}$/))}const a=Xe[ze.ResponsesAdded],d=v[m[a]];return{code:c.a.Response,context:c.b.Code,operation:n.b.Add,level:a,semver:d,path:e.path,message:`added responses with ${o.join(", ")} status codes`}}},Fe={selector:(e,t)=>e.op===n.b.Remove&&M(e.path,/\/responses$/)&&t.op===n.b.Add&&Array.isArray(t.value)&&t.value.length>0,calculate:(e,t)=>{const o=t.value,r=[];let a=!1;for(const{code:e}of o)a||(a=null!==e.match(/^2\d{2}$/)),r.push(e);const d=Xe[a?ze.Response200Removed:ze.ResponsesAdded],s=v[m[d]],p=a?c.b.TwoXx:c.b.Code;return{code:c.a.Response,context:p,operation:n.b.Remove,level:d,semver:s,path:e.path,message:`removed responses with ${r.join(", ")} status codes`}}},Ie={selector:(e,t)=>e.op===n.b.Replace&&M(e.path,/\/responses$/)&&Array.isArray(e.value)&&e.value.length>0&&t.op===n.b.Replace&&M(t.path,/\/responses$/)&&Array.isArray(t.value)&&t.value.length>0,calculate:(e,t)=>{const o=e.value,r=t.value,a=[];for(const{code:e}of o)a.push(e);let d=!1;for(const{code:e}of r){if(d)break;d=null!==e.match(/^2\d{2}$/)}const s=Xe[d?ze.Response200Removed:ze.ResponsesMofified],p=v[m[s]],i=d?c.b.TwoXx:c.b.Code;return{code:c.a.Response,context:i,operation:n.b.Replace,level:s,semver:p,path:e.path,message:`updated responses with ${a.join(", ")} status codes${d?", 2xx response removed":""}`}}},Ge={selector:e=>e.op===n.b.Add&&M(e.path,/\/responses\/\d+$/)&&$(e.value),calculate:e=>{const t=e.value,{code:o}=t,r=Xe[ze.ResponsesAdded],a=v[m[r]];return{code:c.a.Response,context:c.b.Code,operation:n.b.Add,level:r,semver:a,path:e.path,message:"added response with status code "+o}}},Ee={selector:(e,t)=>e.op===n.b.Remove&&M(e.path,/\/responses\/\d+$/)&&t.op===n.b.Add&&M(t.path,/\/responses\/\d+$/)&&$(t.value),calculate:(e,t)=>{const o=t.value,{code:r}=o,a=null!==r.match(/^2\d{2}$/),d=Xe[a?ze.Response200Removed:ze.ResponseRemoved],s=v[m[d]],p=a?c.b.TwoXx:c.b.Code;return{code:c.a.Response,context:p,operation:n.b.Remove,level:d,semver:s,path:e.path,message:"removed response with status code "+r}}},Le={selector:(e,t)=>e.op===n.b.Replace&&M(e.path,/\/responses\/\d+$/)&&$(e.value)&&t.op===n.b.Replace&&M(t.path,/\/responses\/\d+$/)&&$(t.value),calculate:(e,t)=>{const o=t.value,r=e.value,a=null!==o.code.match(/^2\d{2}$/),d=Xe[a?ze.Response200Removed:ze.ResponsesAdded],s=v[m[d]],p=a?c.b.TwoXx:c.b.Code;return{code:c.a.Response,context:p,operation:n.b.Replace,level:d,semver:s,path:e.path,message:`updated response with status code ${o.code} to ${r.code}`}}};var ze;!function(e){e.Response200Removed="response_200_removed",e.ResponsesAdded="responses_added",e.ResponsesRemoved="responses_removed",e.ResponsesMofified="responses_mofified",e.ResponseAdded="response_added",e.ResponseRemoved="response_removed",e.ResponseMofified="response_mofified"}(ze||(ze={}));const Xe={[ze.Response200Removed]:m.Major,[ze.ResponsesAdded]:m.Minor,[ze.ResponsesRemoved]:m.Minor,[ze.ResponsesMofified]:m.Minor,[ze.ResponseAdded]:m.Minor,[ze.ResponseRemoved]:m.Minor,[ze.ResponseMofified]:m.Minor},Je={selector:e=>e.op===n.b.Add&&M(e.path,/\/security$/)&&Array.isArray(e.value),calculate:e=>{const t=e.value,o=[];for(const e of t)"http"===e.type?o.push(e.scheme):o.push(e.type);const r=tt[o.length>0?et.SecuritiesAdded:et.SecuritiesOverridden],a=v[m[r]],d=o.length>0?c.a.Required:c.a.Optional,s=o.length>0?"added "+o.join(", "):"override security";return{code:d,context:c.b.Security,operation:n.b.Add,level:r,semver:a,path:e.path,message:s}}},Ve={selector:(e,t)=>e.op===n.b.Remove&&M(e.path,/\/security$/)&&t.op===n.b.Add&&Array.isArray(t.value),calculate:(e,t)=>{const o=tt[et.SecuritiesRemoved],r=v[m[o]],a=t.value,d=[];for(const e of a)"http"===e.type?d.push(e.scheme):d.push(e.type);return{code:c.a.Optional,context:c.b.Security,operation:n.b.Remove,level:o,semver:r,path:e.path,message:"removed "+d.join(", ")}}},We={selector:(e,t)=>e.op===n.b.Replace&&M(e.path,/\/security$/)&&Array.isArray(e.value)&&t.op===n.b.Replace&&M(t.path,/\/security$/)&&Array.isArray(t.value),calculate:e=>{const t=e.value,o=[];for(const e of t)"http"===e.type?o.push(e.scheme):o.push(e.type);const r=tt[o.length>0?et.SecuritiesAdded:et.SecuritiesOverridden],a=v[m[r]],d=o.length>0?c.a.Required:c.a.Optional,s=o.length>0?"updated "+o.join(", "):"override security";return{code:d,context:c.b.Security,operation:n.b.Replace,level:r,semver:a,path:e.path,message:s}}},Ke={selector:e=>e.op===n.b.Add&&M(e.path,/\/security\/\d+$/)&&$(e.value),calculate:e=>{const t=tt[et.SecurityAdded],o=v[m[t]],r=e.value;let a;return a="http"===r.type?r.scheme:r.type,{code:c.a.Required,context:c.b.Security,operation:n.b.Add,level:t,semver:o,path:e.path,message:"added "+a}}},Ye={selector:(e,t)=>e.op===n.b.Remove&&M(e.path,/\/security\/\d+$/)&&t.op===n.b.Add&&$(t.value),calculate:(e,t)=>{const o=tt[et.SecurityRemoved],r=v[m[o]],a=t.value;let d;return d="http"===a.type?a.scheme:a.type,{code:c.a.Optional,context:c.b.Security,operation:n.b.Remove,level:o,semver:r,path:e.path,message:"removeed "+d}}},Ze={selector:(e,t)=>e.op===n.b.Replace&&M(e.path,/\/security\/\d+$/)&&$(e.value)&&t.op===n.b.Replace&&M(t.path,/\/security\/\d+$/)&&$(t.value),calculate:(e,t)=>{const o=tt[et.SecuritiesAdded],r=v[m[o]],a=e.value,d=t.value;let s;return s="http"===a.type?a.scheme:a.type,{code:c.a.Required,context:c.b.Security,operation:n.b.Replace,level:o,semver:r,path:e.path,message:"replace "+s,data:{security:a,previous:d}}}};var et;!function(e){e.SecuritiesAdded="securities_added",e.SecuritiesRemoved="securities_removed",e.SecuritiesModified="securities_modified",e.SecuritiesOverridden="securities_overridden",e.SecurityAdded="security_added",e.SecurityRemoved="security_removed",e.SecurityModified="security_modified"}(et||(et={}));const tt={[et.SecuritiesAdded]:m.Major,[et.SecuritiesRemoved]:m.Minor,[et.SecuritiesModified]:m.Major,[et.SecuritiesOverridden]:m.Minor,[et.SecurityAdded]:m.Major,[et.SecurityRemoved]:m.Minor,[et.SecurityModified]:m.Major},ot={selector:e=>e.op===n.b.Add&&M(e.path,/\/$/),calculate:e=>{const t=dt[at.ServerAdded],o=v[m[t]],r=e.value,{name:a}=r;return{code:c.a.Server,operation:n.b.Add,level:t,semver:o,path:e.path,message:`added ${a} server`}}},rt={selector:e=>e.op===n.b.Remove&&M(e.path,/\/$/),calculate:(e,t)=>{const o=dt[at.ServerRemoved],r=v[m[o]],a=t.value,{name:d}=a;return{code:c.a.Server,operation:n.b.Remove,level:o,semver:r,path:e.path,message:`removed ${d} server`}}};var at;!function(e){e.ServerAdded="server_added",e.ServerRemoved="server_removed"}(at||(at={}));const dt={[at.ServerAdded]:m.Patch,[at.ServerRemoved]:m.Minor},nt=(e,t)=>R(e,t,ot,rt,j,P,O),st={selector:e=>(e.op===n.b.Replace||e.op===n.b.Add)&&M(e.path,/\/deprecated$/)&&e.value,calculate:e=>{let t=n.b.Add;e.op===n.b.Replace&&(t=n.b.Replace);const o=it[pt.Deprecated],r=v[m[o]];return{code:c.a.Operation,context:c.b.Deprecated,operation:t,level:o,semver:r,path:e.path,message:"deprecated"}}};var pt;!function(e){e.Deprecated="deprecated"}(pt||(pt={}));const it={[pt.Deprecated]:m.Minor},ct={selector:e=>e.op===n.b.Add&&M(e.path,/^\/name$/)&&"string"==typeof e.value,calculate:e=>{const t=mt[ht.ServiceNameAdded],o=v[m[t]];return{code:c.a.Name,operation:n.b.Add,level:t,semver:o,path:e.path,message:"set http service name to "+e.value}}},ut={selector:(e,t)=>e.op===n.b.Remove&&M(e.path,/^\/name$/)&&t.op===n.b.Add&&M(t.path,/^\/name$/)&&"string"==typeof t.value,calculate:e=>{const t=mt[ht.ServiceNameRemoved],o=v[m[t]];return{code:c.a.Name,operation:n.b.Remove,level:t,semver:o,path:e.path,message:"removed http service name"}}},lt={selector:(e,t)=>e.op===n.b.Replace&&M(e.path,/^\/name$/)&&"string"==typeof e.value&&t.op===n.b.Replace&&M(t.path,/^\/name$/)&&"string"==typeof t.value,calculate:e=>{const t=mt[ht.ServiceNameModified],o=v[m[t]];return{code:c.a.Name,operation:n.b.Replace,level:t,semver:o,path:e.path,message:"changed http service name to "+e.value}}};var ht;!function(e){e.ServiceNameAdded="service_name_added",e.ServiceNameModified="service_name_modified",e.ServiceNameRemoved="service_name_removed"}(ht||(ht={}));const mt={[ht.ServiceNameAdded]:m.Patch,[ht.ServiceNameRemoved]:m.Patch,[ht.ServiceNameModified]:m.Patch};var vt=o(60);const bt=(e,t)=>{if("/extends"===e.path){const o=e.op===n.b.Add?e.value:t.op===n.b.Add?t.value:null;return Array.isArray(o)&&o.length>0}return/^\/extends(\/|$)/.test(e.path)},Rt=(e,t)=>"/rules"===e.path?gt(e.op===n.b.Add?e.value:t.op===n.b.Add?t.value:null).length>0:/^\/rules(\/|$)/.test(e.path),yt={selector:(e,t)=>!bt(e,t)&&!Rt(e,t),calculate:(e,t)=>Object.assign(Object.assign({},ft),{operation:e.op,path:e.path,message:"Generic Spectral ruleset change",data:{operation:e,inverse:t}})},ft={code:c.a.Unknown,context:c.b.Unknown,level:m.Unknown,semver:v.Unknown};function gt(e){return"object"==typeof e&&null!==e?Object.keys(e):[]}const At={selector:bt,calculate:(e,t)=>{let o="'extends' property has been changed";const r=e.path.split("/");if(2===r.length)if(e.op===n.b.Add){const{value:t}=e;Array.isArray(t)&&(o=0===t.length?"An empty 'extends' property has been added":`Ruleset extends ${t.map(Mt).join(", ")} ${vt("ruleset",t.length)}`)}else e.op===n.b.Remove&&(o="Ruleset has only local rules now");else 3===r.length&&(e.op===n.b.Add?o=`Ruleset extends '${e.value}' ruleset`:e.op===n.b.Remove&&t.op===n.b.Add?o=`Ruleset no longer extends '${t.value}' ruleset`:e.op===n.b.Replace&&t.op===n.b.Replace&&(o=`'${t.value}' ruleset has been replaced with '${e.value}' ruleset`));return Object.assign(Object.assign({},ft),{operation:e.op,path:e.path,message:o,data:{operation:e,inverse:t}})}},qt={selector:Rt,calculate:(e,t)=>{const[,,o,...r]=e.path.split("/");let a="";if(void 0!==o){const t=[o];a=0!==r.length?$t(t,"modify"):$t(t,e.op===n.b.Add?n.b.Add:e.op===n.b.Remove?n.b.Remove:"modify")}else e.op===n.b.Add&&t.op===n.b.Remove?a=$t(gt(e.value),n.b.Add):e.op===n.b.Remove&&t.op===n.b.Add&&(a=$t(gt(t.value),n.b.Remove));return Object.assign(Object.assign({},ft),{operation:e.op,path:e.path,message:a,data:{operation:e,inverse:t}})}};function $t(e,t){return 0===e.length?"No rules have been changed":[vt("Rule",e.length),e.map(Mt).join(", "),vt("has",e.length),"been","add"===t?"added":"modify"===t?"modified":"removed"].join(" ")}function Mt(e){return`'${e}'`}const Nt={selector:()=>!0,calculate:(e,t)=>({code:c.a.Unknown,context:c.b.Unknown,level:m.Patch,semver:v.Patch,operation:n.b.Test,path:"/",message:"updated",data:{operation:e,inverse:t}})},_t={selector:()=>!0,calculate:(e,t)=>({code:c.a.Unknown,context:c.b.Unknown,level:m.Unknown,semver:v.Unknown,operation:n.b.Test,path:"unknown",message:"unknown json operation, investigate",data:{operation:e,inverse:t}})},jt=(e,t)=>R(e,t,_t),Pt={[s.NodeType.Article]:(e,t)=>R(e,t,y),[s.NodeType.HttpOperation]:(e,t)=>R(e,t,st,j,P,O)||((e,t)=>R(e,t,Je,Ve,We,Ke,Ye,Ze,j,P,O))(e,t)||Be(e,t)||((e,t)=>R(e,t,Qe,Fe,Ie,Ge,Ee,Le,j,P,O)||Se(e,t)||W(e,t))(e,t)||nt(e,t),[s.NodeType.HttpServer]:nt,[s.NodeType.HttpService]:(e,t)=>R(e,t,ct,ut,lt,j,P,O),[s.NodeType.Model]:E,[s.NodeType.Generic]:q,[s.NodeType.Unknown]:jt,[s.NodeType.TableOfContents]:(e,t)=>R(e,t,Nt),[s.NodeType.SpectralRuleset]:(e,t)=>R(e,t,At,qt,yt),[s.NodeType.Image]:q},Ot=(e,t)=>{const o=kt(Pt[e],t),[r]=(e=>{if(!e)return[v.Unknown,m.Unknown];let t=m.Unknown;for(const o of e){const{level:e}=o;if(e>t&&(t=e),!m[t+1])break}return[v[m[t]],t]})(o);return{changelog:o,semver:r}},kt=(e,t)=>{let o=e;o||(o=jt);const r=[],a=b.inverse(t);for(let e=0;e<t.length;++e){let d,s,p=t[e];p.op===n.b.Test?(d=t[e+1],++e):d=p;const i=a.findIndex(e=>p.path===e.path);p=a[i],s=p.op===n.b.Test?a[i+1]:p;const c=o(d,s);c&&r.push(...c)}return r},wt=[{op:n.b.Test,path:"/",value:"rab"},{op:n.b.Replace,path:"/",value:"bar"}],xt=({source:e={},target:t={}}={})=>{const o=Object(d.keys)(e).length,r=Object(d.keys)(t).length;return o||r?o?r?Ht(e,t):Tt(e):St(t):[]},St=e=>Object.entries(e).map(([,e])=>({uri:e.uri,code:c.a.Node,operation:n.b.Add,context:c.b.First,semver:v.Major,level:m.Major,path:"/",message:"added "+e.type.replace(/_/g," ")})),Tt=e=>Object.entries(e).map(([,e])=>({uri:e.uri,code:c.a.Node,operation:n.b.Remove,context:c.b.Last,semver:v.Major,level:m.Major,path:"/",message:"removed "+e.type.replace(/_/g," ")})),Ut=(e,t)=>{const o=[],r=[];if([e.type,t.type].includes(s.NodeType.Article))o.push(...wt);else if(e.type===t.type&&e.data&&t.data){const r=Object(p.parse)(e.data),a=Object(p.parse)(t.data);if(!Object(d.isObject)(r)||!Object(d.isObject)(a))return[];if(o.push(...i.c(r,a,!0)||[]),e.type===s.NodeType.HttpService&&t.type===s.NodeType.HttpService){const r=i.c(h(e.data,e.spec),h(t.data,t.spec),!0);r&&o.push(...r)}}if(o.length>0){const{changelog:e}=Ot(t.type,o);r.push(...e.map(e=>Object.assign(Object.assign({},e),{uri:t.uri})))}return r},Ht=(e,t)=>{const o=[];for(const r in e){if(!e.hasOwnProperty(r)||!e[r].hasOwnProperty("data"))continue;const a=t[r],d=e[r];d&&(Dt(o,d,a),Ct(o,d,a),Bt(o,d,a),o.push(...Ut(d,a)))}return o};function Dt(e,t,o){t.type!==o.type&&e.push({uri:o.uri,code:c.a.Type,operation:n.b.Replace,level:m.Major,semver:v.Major,path:"/",message:"node type changed to "+o.type})}function Ct(e,t,o){t.spec!==o.spec&&e.push({uri:o.uri,code:c.a.Spec,operation:n.b.Replace,level:m.Major,semver:v.Major,path:"/",message:"node spec changed to "+o.spec})}function Bt(e,t,o){const r=null==t?void 0:t.slug,a=null==o?void 0:o.slug;r!==a&&(a?e.push({uri:o.uri,code:c.a.Unknown,operation:n.b.Replace,level:m.Patch,semver:v.Patch,path:"/slug",message:"node slug changed to "+a}):e.push({uri:o.uri,code:c.a.Unknown,operation:n.b.Remove,level:m.Patch,semver:v.Patch,path:"/slug",message:`custom node slug '${r}' was removed`}))}var Qt=o(2212),Ft=o(2238),It=o(2214);async function Gt(e,t){let o=[],r=0,a=0;do{const{branchNodes:n}=await t(Object.assign(Object.assign({},e),{cursor:r}));o=o.concat(n);const s=Object(d.last)(o);r=s?s.id:0,a=n.length}while(a>0);return o}const Et=async({target:e,projectId:t,branch:o,apiURL:r,logger:a,GetDataForNodes:n,GetDataHashForNodes:s})=>{null==a||a.info("Looking up remote workspace nodes...");const p=await Gt({projectId:t,branch:o},s);null==a||a.info(`Found ${p.length} remote nodes`);const i={};for(const e of p)i[e.node.uri]={dataHash:e.snapshot.dataHash,type:It.d[e.snapshot.type],uri:e.node.uri,spec:e.snapshot.spec?It.c[e.snapshot.spec]:void 0,slug:e.slug||null};null==a||a.info("Computing changes...");const c=Object(Ft.a)({source:i,target:e}),u=Object(Ft.b)({source:i,target:e}),l=Object(Ft.d)({source:i,target:e}),h=await Gt({projectId:t,branch:o,uris:l.map(e=>e.uri)},n);let m=[];if(0===Object.keys(i).length)m=xt({target:Object(d.keyBy)(c,"uri")});else{if(l.length){const t={};for(const e of h)t[e.node.uri]={stableId:e.stable_id||null,slug:e.slug||null,data:e.snapshot.data,dataHash:e.snapshot.dataHash,baseUri:e.baseUri,format:e.node.format,isFile:e.isFile,name:e.name,summary:e.snapshot.summary,version:e.version,type:It.d[e.snapshot.type],uri:e.node.uri,spec:e.snapshot.spec?It.c[e.snapshot.spec]:void 0,internal:e.internal};const o=xt({source:t,target:e});m.push(...o)}if(c.length){const e=xt({target:Object(d.keyBy)(c,"uri")});m.push(...e)}if(u.length){const e=xt({source:Object(d.keyBy)(u,"uri")});m.push(...e)}}null==a||a.info("Computing node edges...");const v=await Object(Qt.c)({nodes:Object(d.keyBy)([...c,...l],"uri"),allNodes:Object(d.keyBy)(e,"uri"),apiURL:r});return null==a||a.info(`Found ${c.length} added nodes, ${l.length} modified nodes, ${u.length} deleted nodes, and ${v.length} edges`),{added:c.map(Lt),modified:l.map(Lt),deleted:u,edges:v,changelog:m}},Lt=e=>{const{parsed:t}=e;return Object(a.__rest)(e,["parsed"])};var zt=o(2346),Xt=o(2877);const Jt=e=>{switch(e.context){case"cli":case"worker":case"studio":return{"user-agent":`stoplight/${e.context} ${e.version}`,authorization:"Bearer "+e.jwt};default:!function(e){throw new Error("Unknown context type:"+e)}(e.context)}},Vt=e=>{const t=new Xt.GraphQLClient(e.endpoint,{headers:Jt(e)});return Object(c.e)(t)};function Wt(e){const{branch:t,target:o,nodeValues:r,projectId:a,context:d,cwd:n=""}=e,s=Vt(d),{GetDataForNodes:p=s.GetDataForNodes,GetDataHashForNodes:i=s.GetDataHashForNodes}=e,c=e.apiURL||(e=>{const t=new zt.a(e);return t.pathname="/api",t.href})(d.endpoint);return Et({target:Object(Ft.n)(o,r,n,c),projectId:a,branch:t,apiURL:c,logger:e.logger,GetDataForNodes:p,GetDataHashForNodes:i})}const Kt=async e=>{var t,o;const{payload:a,branch:d,projectId:n,context:s,commitHash:p}=e,{UploadNodesOrig:i,UploadNodesWithReleaseNote:c}=Vt(s),u=e.releaseNote?c:i,l=Object(r.stringify)(a),h=(new TextEncoder).encode(l).length/1024;null===(t=e.logger)||void 0===t||t.info(`Pushing analyze results to Stoplight (${Math.round(h)}kb)...`);const{analyzerPush:m}=await u({projectId:n,branch:d,analyzerResults:l,commitHash:p,releaseNote:e.releaseNote});return null===(o=e.logger)||void 0===o||o.info("Analyze results successfully processed"),m}}}]);