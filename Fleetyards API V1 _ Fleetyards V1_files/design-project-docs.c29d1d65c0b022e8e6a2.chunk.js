(self.webpackJsonp=self.webpackJsonp||[]).push([[15],{2318:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(0),o=r(2),a=r(3);const c=({branchNodeId:e,uri:t,projectSlug:r,pause:c})=>{var l,s,u;const{actions:d,state:i}=Object(a.e)(),[{data:g,error:p,fetching:m}]=Object(o.kb)({variables:{uri:t,workspaceSlug:null===(l=i.workspaces.currentWorkspace)||void 0===l?void 0:l.slug,projectSlug:r},pause:c}),[{data:h,error:b,fetching:f}]=Object(o.yb)({variables:{branchNodeId:e,maxDepth:20},pause:c}),j=(null==g?void 0:g.branchNodes)?null==g?void 0:g.branchNodes[0]:void 0,v=null==h?void 0:h.sl_sl_node_edges.reduce((e,t)=>e.concat(t.toBranchNode.changes),[]),E=null===(u=null===(s=null==h?void 0:h.sl_sl_node_edges_aggregate.aggregate)||void 0===s?void 0:s.max)||void 0===u?void 0:u.depth;n.useEffect(()=>{20===E&&d.reporter.log({event:"changelog_max_depth_reached",payload:{branch_node_id:e}})},[E,d.reporter,e]);const S=p||b;return{changes:[...(null==j?void 0:j.changes)||[],...v||[]],error:S,fetching:m||f}}},2319:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(1),o=r(13),a=r(0);const c=a.memo(({changes:e=[]})=>{if(!e||!e.length)return a.createElement(n.e,{color:"muted"},"No changes for this resource.");const t=Object(o.orderBy)(e,[e=>new Date(e.createdAt).getTime()],["desc"]),r=Object(o.groupBy)(t,e=>new Date(e.createdAt).toDateString());return a.createElement(n.W,{divider:!0,spacing:4},Object.keys(r).map((e,t)=>a.createElement(n.W,{key:t,spacing:2,"data-test":"changelog-group"},a.createElement(n.e,{fontWeight:"bold"},e),r[e].map((e,t)=>a.createElement(n.n,{key:t,fontSize:"sm",justify:"between","data-test":"changelog"},a.createElement(n.e,{flex:1},e.message),a.createElement(n.e,{fontWeight:"semibold",textTransform:"lowercase"},e.semver))))))})},2320:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r(0),o=r(3),a=r(134),c=r(748);const l=({error:e})=>{const{actions:t}=Object(o.e)(),r=s(e)?e.code:404;return n.useEffect(()=>{t.router.forceStatusCode(r)},[r,t.router]),500===r?n.createElement(c.a,null):n.createElement(a.a,null)},s=e=>!(!e||"object"!=typeof e||!("code"in e))&&"number"==typeof e.code},2917:function(e,t,r){"use strict";r.r(t);var n=r(19),o=r(247),a=r(1),c=r(0),l=r(92),s=r(526),u=r.n(s),d=r(2),i=r(3),g=r(2318),p=r(738),m=r(2319);const h=({branchNodeId:e,nodeType:t,nodeUri:r,projectSlug:n,dialogLocation:o})=>{const{isOpen:l,open:s,close:u}=Object(a.gb)(),{actions:d}=Object(i.e)(),h="true"!==window.localStorage.getItem("feedback"),{changes:f,error:j,fetching:v}=Object(g.a)({branchNodeId:e,uri:r,projectSlug:n,pause:!l});return c.useEffect(()=>{l&&!v&&d.reporter.log({event:"changelog_dialog_opened",payload:{location:o,node_type:t,changes_count:null==f?void 0:f.length}})},[l,t,v,f,o,d.reporter]),c.createElement(c.Fragment,null,c.createElement(a.f,{"data-test":"changelog-btn",size:"sm",icon:c.createElement(a.q,{icon:["fas","exchange-alt"]}),onPress:s},"Changelog"),c.createElement(a.A,{isOpen:l,onClose:u,title:"Changelog",footer:h?void 0:c.createElement(b,{nodeType:t,changesCount:f.length})},j?c.createElement(p.a,{error:j}):c.createElement(m.a,{changes:f})))};function b({nodeType:e,changesCount:t}){const{actions:r}=Object(i.e)(),[n,o]=c.useState(!1);return n?c.createElement(a.e,null,"Thank you for your feedback!"):c.createElement(a.o,{spacing:4},c.createElement(a.e,null,"Do you find this information useful?"),c.createElement(a.f,{icon:c.createElement(a.q,{icon:["far","thumbs-up"]}),onPress:()=>{o(!0),r.reporter.log({event:"feedback_given",payload:{target:"changelog_dialog",value:"positive",node_type:e,changes_count:t}}),window.localStorage.setItem("feedback",JSON.stringify(!0))}}),c.createElement(a.f,{icon:c.createElement(a.q,{icon:["far","thumbs-down"]}),onPress:()=>{o(!0),r.reporter.log({event:"feedback_given",payload:{target:"changelog_dialog",value:"negative",node_type:e,changes_count:t}}),window.localStorage.setItem("feedback",JSON.stringify(!0))}}))}var f=r(996);const j=c.memo(({projectSlug:e,node:t})=>{const{state:r}=Object(i.e)(),s=t.type===d.o.Article;return c.createElement(l.c,{value:{img:f.a}},c.createElement(a.e,{"data-test":"project-page",px:20,py:16,mx:"auto",w:"full",style:{maxWidth:1500}},r.auth.isLoggedIn&&!s&&c.createElement(a.n,{justify:"end"},c.createElement(h,{branchNodeId:t.branch_node_id,nodeType:t.type,nodeUri:t.uri,projectSlug:e,dialogLocation:"project_doc_page"})),c.createElement(o.b,{Link:n.a,node:t})))},u.a);var v=r(531),E=r(352),S=r(997),y=r(2320),_=r(134),w=r(528),k=r(259),O=r(33),I=r(16);const N=({projectSlug:e,branchSlug:t,nodeUri:r})=>{const{branchNode:o,fetching:a,error:l}=function({projectSlug:e,branchSlug:t,nodeUri:r}){const{state:n}=Object(i.e)(),o=!I.f||!n.metadata.dataBootstrapComplete,a=n.workspaces.currentWorkspaceId,[c]=Object(d.ib)({pause:o||!t,variables:{workspaceId:a,projectSlug:e,branchSlug:t,uri:"/"+r}}),[l]=Object(d.jb)({pause:Boolean(o||t),variables:{workspaceId:a,projectSlug:e,uri:"/"+r}}),{data:s,error:u}=t?c:l;return{branchNode:(null==s?void 0:s.branchNodes)?s.branchNodes[0]:void 0,fetching:!s&&!u,error:u}}({projectSlug:e,branchSlug:t,nodeUri:r});if(o){const e=Object(k.a)({type:o.snapshot.type,nodeId:o.nodeId,stableId:o.stable_id,name:o.name,slug:o.slug});return c.createElement(n.d,{to:e,noThrow:!0})}return a?c.createElement(E.a,null):l?c.createElement(p.a,{error:l}):c.createElement(_.a,null)};const T=({projectId:e,projectSlug:t,projectName:r,nodeSlug:a,branchSlug:l})=>{var s;const{state:u,actions:d}=Object(i.e)(),{state:g}=Object(n.i)(),p=null===(s=u.workspaces.currentWorkspace)||void 0===s?void 0:s.slug,m=Object(O.b)("prj",e),{data:h,isLoading:b,error:f}=Object(o.g)({nodeSlug:a||"",projectId:m,branchSlug:l});c.useEffect(()=>{d.reporter.log({event:"project_docs_viewed",payload:{project:t,workspace_slug:p}})},[d.reporter,p,t]);let v=null;if(f){if(null==g?void 0:g.branchSwitch)return c.createElement(n.d,{to:"/docs/"+encodeURIComponent(t)+(l?"/branches/"+encodeURIComponent(l):""),replace:!0,noThrow:!0});v=f instanceof o.c&&404===f.code?c.createElement(x,null):c.createElement(y.a,{error:f})}else if(b)v=c.createElement(E.a,null);else if(h){if((null==h?void 0:h.slug)&&a!==h.slug)return c.createElement(n.d,{to:"./"+h.slug,replace:!0,noThrow:!0});v=c.createElement(j,{projectSlug:t,node:h})}else v=c.createElement(x,null);return c.createElement(c.Fragment,null,h&&c.createElement(S.a,{projectName:r,nodeName:h.title,nodeSummary:h.summary}),v)},x=()=>{var e;const{state:t}=Object(i.e)();return c.createElement(_.a,null,t.auth.isLoggedIn?"This page does not exist or you do not have sufficient permission":(null===(e=t.workspaces.currentWorkspace)||void 0===e?void 0:e.hideSignIn)?null:c.createElement(c.Fragment,null,"Are you a member of the workspace? ",c.createElement(n.a,{to:"/auth"},"Login here")))};t.default=({projectId:e,projectSlug:t,projectName:r,nodeSlug:n,branchSlug:o})=>{var l;const{state:s}=Object(i.e)(),u=null===(l=s.workspaces.currentWorkspace)||void 0===l?void 0:l.slug;return Object(w.a)({event:"docs_viewed_from_daily_digest",payload:{project_slug:t,workspace_slug:u}},"daily_summary"),c.createElement(c.Fragment,null,c.createElement(a.e,{w:"full",borderB:!0,className:"h-TopNav",pl:10,pr:4},c.createElement(v.a,{branchSlug:o,projectId:e,placeholder:`Search ${r||""}...`})),Object(k.c)(n)?c.createElement(T,{projectId:e,projectSlug:t,projectName:r,nodeSlug:n,branchSlug:o}):c.createElement(N,{projectSlug:t,nodeUri:n,branchSlug:o}))}}}]);