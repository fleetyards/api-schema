(self.webpackJsonp=self.webpackJsonp||[]).push([[60],{2172:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(450);t.Kind=i.Kind,t.ScalarType=i.ScalarType},2201:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isObject=e=>null!==e&&"object"==typeof e},2202:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertArray=t.assertString=t.assertRuleset=void 0;const i=r(18),n=(0,i.__importDefault)(r(2131)),s=(0,i.__importDefault)(r(2475)),a=new n.default({strict:!0,strictTuples:!1});a.addSchema(s.default),t.assertRuleset=function(e){if(!a.validate(s.default,e))throw new Error("Invalid ruleset provided")},t.assertString=function(e){if("string"!=typeof e)throw new TypeError(String(e)+" is not a string")},t.assertArray=function(e){if(!Array.isArray(e))throw new TypeError(String(e)+" is not an array")}},2311:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(2172),n=r(2201);t.buildJsonPath=function(e){const t=[];let r=e;for(;e;){switch(e.kind){case i.Kind.SCALAR:t.unshift(e.value);break;case i.Kind.MAPPING:r!==e.key&&(t.length>0&&n.isObject(e.value)&&e.value.value===t[0]?t[0]=e.key.value:t.unshift(e.key.value));break;case i.Kind.SEQ:if(r){const n=e.items.indexOf(r);r.kind===i.Kind.SCALAR?t[0]=n:-1!==n&&t.unshift(n)}}r=e,e=e.parent}return t}},2312:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lineForPosition=(e,r,i=0,n)=>{if(0===e||0===r.length||e<r[0])return 0;void 0===n&&(n=r.length);const s=Math.floor((n-i)/2)+i;if(e>=r[s]&&!r[s+1])return s+1;const a=r[Math.min(s+1,r.length)];return e===r[s]-1?s:e>=r[s]&&e<=a?e===a?s+2:s+1:e>r[s]?t.lineForPosition(e,r,s+1,n):t.lineForPosition(e,r,i,s-1)}},2461:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.process=t.migrateRuleset=void 0;const i=r(18),n=r(73),s=r(2753),a=r(2096),o=r(288),l=(0,i.__importDefault)(r(2759)),u=r(2825),c=r(2157),d=r(2202);async function f(e,t,r){const i=(0,o.isURL)(e)?await(await r(e)).text():await t.promises.readFile(e,"utf8"),{data:a}=".json"===(0,o.extname)(e)?(0,n.parseWithPointers)(i):(0,s.parseWithPointers)(i,{mergeKeys:!0});return(0,d.assertRuleset)(a),a}async function p(e,t){return await async function e(t,r,i){var s;for(const[e,n]of r.hooks)if(e.test(i)){const e=await n(t,r);if(void 0!==e)return e}if(Array.isArray(t))return c.builders.arrayExpression((await Promise.all(t.map(async(t,n)=>await e(t,r,`${i}/${String(n)}`)))).filter(Boolean));if("number"==typeof t||"boolean"==typeof t||"string"==typeof t)return c.builders.literal(t);if("object"!=typeof t)throw new Error("Cannot dump "+(null!==(s=(0,n.safeStringify)(t))&&void 0!==s?s:"<unknown value>"));return null===t?c.builders.literal(null):c.builders.objectExpression((await Promise.all(Object.entries(t).map(async([t,n])=>{const s=await e(n,r,`${i}/${t}`);return null!==s?c.builders.property("init",c.builders.identifier(JSON.stringify(t)),s):null}))).filter(Boolean))}(e,t,"")}t.migrateRuleset=async function(e,t){const{fs:r,fetch:i=a.fetch,format:n,npmRegistry:s}=t,c=(0,o.dirname)(e),d=new u.Tree({format:n,npmRegistry:s,scope:new u.Scope}),m=await f(e,r,i),h=new Set,v={cwd:c,filepath:e,tree:d,opts:{fetch:i,...t},npmRegistry:null!=s?s:null,hooks:h,read:f};for(const e of l.default)e(v.hooks);return d.ruleset=await p(m,v),d.toString()},t.process=p},2462:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(2172),n=r(2201);t.dereferenceAnchor=(e,r)=>{if(!n.isObject(e))return e;if(e.kind===i.Kind.ANCHOR_REF&&e.referencesAnchor===r)return null;switch(e.kind){case i.Kind.MAP:return Object.assign({},e,{mappings:e.mappings.map(e=>t.dereferenceAnchor(e,r))});case i.Kind.SEQ:return Object.assign({},e,{items:e.items.map(e=>t.dereferenceAnchor(e,r))});case i.Kind.MAPPING:return Object.assign({},e,{value:t.dereferenceAnchor(e.value,r)});case i.Kind.SCALAR:return e;case i.Kind.ANCHOR_REF:return n.isObject(e.value)&&s(e)?null:e;default:return e}};const s=e=>{const{referencesAnchor:t}=e;let r=e;for(;r=r.parent;)if("anchorId"in r&&r.anchorId===t)return!0;return!1}},2463:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(328),n=r(35),s=r(450),a=r(2311),o=r(2462),l=r(2312),u=r(2172),c=r(2201);function d(e){switch(s.determineScalarType(e)){case u.ScalarType.null:return null;case u.ScalarType.string:return String(e.value);case u.ScalarType.bool:return s.parseYamlBoolean(e.value);case u.ScalarType.int:return s.parseYamlBigInteger(e.value);case u.ScalarType.float:return s.parseYamlFloat(e.value)}}t.parseWithPointers=(e,r)=>{const i=f(e),n=s.load(e,Object.assign({},r,{ignoreDuplicateKeys:!0})),a={ast:n,lineMap:i,data:void 0,diagnostics:[],metadata:r};return n?(a.data=t.walkAST(n,r,i,a.diagnostics),n.errors&&a.diagnostics.push(...m(n.errors,i)),a.diagnostics.length>0&&a.diagnostics.sort((e,t)=>e.range.start.line-t.range.start.line),Array.isArray(a.ast.errors)&&(a.ast.errors.length=0),a):a},t.walkAST=(e,r,i,n)=>{if(e)switch(e.kind){case u.Kind.MAP:{const s=void 0!==r&&!0===r.preserveKeyOrder,a=v(s),o=[],l=void 0!==r&&!0===r.mergeKeys,u=void 0!==r&&!1===r.json,c=void 0!==r&&!1===r.ignoreDuplicateKeys;for(const f of e.mappings){if(!b(f,i,n,u))continue;const e=String(d(f.key));if((u||c)&&(!l||"<<"!==e))if(o.includes(e)){if(u)throw new Error("Duplicate YAML mapping key encountered");c&&n.push(S(f.key,i,"duplicate key"))}else o.push(e);if(l&&"<<"===e){const e=h(t.walkAST(f.value,r,i,n),s);Object.assign(a,e)}else a[e]=t.walkAST(f.value,r,i,n),s&&_(a,e)}return a}case u.Kind.SEQ:return e.items.map(e=>t.walkAST(e,r,i,n));case u.Kind.SCALAR:{const t=void 0!==r&&!0===r.bigInt,i=d(e);return t||"bigint"!=typeof i?i:Number(i)}case u.Kind.ANCHOR_REF:return c.isObject(e.value)&&(e.value=o.dereferenceAnchor(e.value,e.referencesAnchor)),t.walkAST(e.value,r,i,n);default:return null}return e};const f=e=>{const t=[];let r=0;for(;r<e.length;r++)"\n"===e[r]&&t.push(r+1);return t.push(r+1),t};function p(e,t){return 0===t?Math.max(0,e[0]-1):Math.max(0,e[t]-e[t-1]-1)}const m=(e,t)=>{const r=[];let i=-1,s=0;for(const a of e){const e={code:a.name,message:a.reason,severity:a.isWarning?n.DiagnosticSeverity.Warning:n.DiagnosticSeverity.Error,range:{start:{line:a.mark.line,character:a.mark.column},end:{line:a.mark.line,character:a.mark.toLineEnd?p(t,a.mark.line):a.mark.column}}};"missed comma between flow collection entries"===a.reason?i=-1===i?s:i:-1!==i&&(r[i].range.end=e.range.end,r[i].message="invalid mixed usage of block and flow styles",r.length=i+1,s=r.length,i=-1),r.push(e),s++}return r},h=(e,t)=>{if(Array.isArray(e)){return e.reduceRight(t?(e,t)=>{const r=Object.keys(t);Object.assign(e,t);for(let t=r.length-1;t>=0;t--)g(e,r[t]);return e}:(e,t)=>Object.assign(e,t),v(t))}return"object"!=typeof e||null===e?null:Object(e)};function v(e){return e?i.default({}):{}}function y(e,t){if(!(t in e))return;const r=i.getOrder(e),n=r.indexOf(t);-1!==n&&r.splice(n,1)}function g(e,t){y(e,t),i.getOrder(e).unshift(t)}function _(e,t){y(e,t),i.getOrder(e).push(t)}function b(e,t,r,i){if(e.key.kind!==u.Kind.SCALAR)return i||r.push(P(e.key,t,"mapping key must be a string scalar",i)),!1;if(!i){const n=typeof d(e.key);"string"!==n&&r.push(P(e.key,t,"mapping key must be a string scalar rather than "+(null===e.key.valueObject?"null":n),i))}return!0}function P(e,t,r,i){const s=S(e,t,r);return s.code="YAMLIncompatibleValue",s.severity=i?n.DiagnosticSeverity.Hint:n.DiagnosticSeverity.Warning,s}function S(e,t,r){const i=l.lineForPosition(e.startPosition,t),s=l.lineForPosition(e.endPosition,t);return{code:"YAMLException",message:r,severity:n.DiagnosticSeverity.Error,path:a.buildJsonPath(e),range:{start:{line:i,character:0===i?e.startPosition:e.startPosition-t[i-1]},end:{line:s,character:0===s?e.endPosition:e.endPosition-t[s-1]}}}}},2475:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{aliases:{type:"object",additionalProperties:{oneOf:[{type:"array",items:{type:"string"}},{type:"object",properties:{description:{type:"string"},targets:{type:"array",minItems:1,items:{type:"object",properties:{formats:{$ref:"#/properties/formats"},given:{type:"array",items:{type:"string"}}},required:["formats","given"]}}},required:["targets"]}]}},except:{type:"object",additionalProperties:{type:"array",items:{type:"string"}}},extends:{oneOf:[{type:"string"},{type:"array",items:{oneOf:[{type:"string"},{type:"array",minItems:2,items:[{type:"string"},{enum:["all","recommended","off"]}]}]}}]},formats:{type:"array",minItems:1,items:{type:"string",enum:["oas2","oas3","oas3.0","oas3.1","asyncapi2","json-schema","json-schema-loose","json-schema-draft4","json-schema-draft6","json-schema-draft7","json-schema-draft-2019-09","json-schema-2019-09","json-schema-draft-2020-12","json-schema-2020-12"]}},functions:{type:"array",items:{type:"string"}},functionsDir:{type:"string"},rules:{type:"object",properties:{formats:{$ref:"#/properties/formats"}}}}}},2753:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(18);i.__exportStar(r(2311),t),i.__exportStar(r(2462),t),i.__exportStar(r(2754),t),i.__exportStar(r(2755),t),i.__exportStar(r(2312),t),i.__exportStar(r(2756),t),i.__exportStar(r(2463),t),i.__exportStar(r(2757),t),i.__exportStar(r(2172),t),i.__exportStar(r(2758),t)},2754:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(2311),n=r(2172),s=r(2201);function a(e,t,r){const i=r[t-1]+1,s=r[t];switch(e.kind){case n.Kind.MAPPING:return e.key;case n.Kind.MAP:if(0!==e.mappings.length)for(const n of e.mappings)if(n.startPosition>i&&n.startPosition<=s)return a(n,t,r);break;case n.Kind.SEQ:if(0!==e.items.length)for(const n of e.items)if(null!==n&&n.startPosition>i&&n.startPosition<=s)return a(n,t,r)}return e}t.getJsonPathForPosition=({ast:e,lineMap:t},{line:r,character:o})=>{if(r>=t.length||o>=t[r])return;const l=0===r?0:t[r-1]+1,u=function e(t,r,i,o){for(const a of function*(e){switch(e.kind){case n.Kind.MAP:if(0!==e.mappings.length)for(const t of e.mappings)s.isObject(t)&&(yield t);break;case n.Kind.MAPPING:s.isObject(e.key)&&(yield e.key),s.isObject(e.value)&&(yield e.value);break;case n.Kind.SEQ:if(0!==e.items.length)for(const t of e.items)s.isObject(t)&&(yield t);break;case n.Kind.SCALAR:yield e}}(t))if(a.startPosition<=r&&r<=a.endPosition)return a.kind===n.Kind.SCALAR?a:e(a,r,i,o);if(o[i-1]===o[i]-1)return t;if(t.startPosition<o[i-1]&&r<=t.endPosition){if(t.kind!==n.Kind.MAPPING)return a(t,i,o);if(t.value&&t.key.endPosition<r)return a(t.value,i,o)}return t}(e,Math.min(t[r]-1,l+o),r,t);if(!s.isObject(u))return;const c=i.buildJsonPath(u);return 0!==c.length?c:void 0}},2755:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(2312),n=r(2172),s=r(2201);function a(e,t){if(e.parent&&e.parent.kind===n.Kind.MAPPING){if(null===e.parent.value)return e.parent.endPosition;if(e.kind!==n.Kind.SCALAR)return e.parent.key.endPosition+1}return null===e.parent&&t-e.startPosition==0?0:e.startPosition}function o(e){switch(e.kind){case n.Kind.SEQ:const{items:t}=e;if(0!==t.length){const e=t[t.length-1];if(null!==e)return o(e)}break;case n.Kind.MAPPING:if(null!==e.value)return o(e.value);break;case n.Kind.MAP:if(null!==e.value&&0!==e.mappings.length)return o(e.mappings[e.mappings.length-1]);break;case n.Kind.SCALAR:if(null!==e.parent&&e.parent.kind===n.Kind.MAPPING&&null===e.parent.value)return e.parent.endPosition}return e.endPosition}function l(e,t){return t?e.reduce((e,t)=>(s.isObject(t)&&("<<"===t.key.value?e.push(...function e(t){if(!s.isObject(t))return[];switch(t.kind){case n.Kind.SEQ:return t.items.reduceRight((t,r)=>(t.push(...e(r)),t),[]);case n.Kind.MAP:return t.mappings;case n.Kind.ANCHOR_REF:return e(t.value);default:return[]}}(t.value)):e.push(t)),e),[]):e}t.getLocationForJsonPath=({ast:e,lineMap:t,metadata:r},i,c=!1)=>{const d=function(e,t,{closest:r,mergeKeys:i}){e:for(const a of t){if(!s.isObject(e))return r?e:void 0;switch(e.kind){case n.Kind.MAP:const t=l(e.mappings,i);for(let r=t.length-1;r>=0;r--){const i=t[r];if(i.key.value===a){e=null===i.value?i.key:i.value;continue e}}return r?e:void 0;case n.Kind.SEQ:for(let t=0;t<e.items.length;t++)if(t===Number(a)){const r=e.items[t];if(null===r)break;e=r;continue e}return r?e:void 0;default:return r?e:void 0}}return e}(e,i,{closest:c,mergeKeys:void 0!==r&&!0===r.mergeKeys});if(void 0!==d)return u(t,{start:a(d,t.length>0?t[0]:0),end:o(d)})};const u=(e,{start:t=0,end:r=0})=>{const n=i.lineForPosition(t,e),s=i.lineForPosition(r,e);return{range:{start:{line:n,character:t-(0===n?0:e[n-1])},end:{line:s,character:r-(0===s?0:e[s-1])}}}}},2756:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(450),n=r(2463);t.parse=e=>n.walkAST(i.load(e),void 0,[],[])},2757:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(450);t.safeStringify=(e,t)=>"string"==typeof e?e:i.safeDump(e,t)},2758:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(328);t.KEYS=Symbol.for(i.ORDER_KEY_ID);const n={ownKeys:e=>t.KEYS in e?e[t.KEYS]:Reflect.ownKeys(e)};t.trapAccess=e=>new Proxy(e,n)},2759:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(18),n=(0,i.__importDefault)(r(2760)),s=(0,i.__importDefault)(r(2770)),a=(0,i.__importDefault)(r(2771)),o=(0,i.__importDefault)(r(2772)),l=[(0,i.__importDefault)(r(2824)).default,o.default,a.default,n.default,s.default];t.default=l},2760:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const i=r(18),n=r(2157),s=(0,i.__importStar)(r(288)),a=r(2202),o=r(2461),l={"spectral:oas":"oas","spectral:asyncapi":"asyncapi"},u=/^\.[cm]?js$/;async function c(e,t){if(t in l)return e.tree.addImport(l[t],"@stoplight/spectral-rulesets");const r=e.tree.resolveModule(t,e,"ruleset");return u.test(s.extname(r))?e.tree.addImport(`${s.basename(r,!0)}_${s.extname(r)}`,r,!0):await(0,o.process)(await e.read(r,e.opts.fs,e.opts.fetch),{...e,filepath:r,tree:e.tree.fork()})}t.default=function(e){e.add([/^(\/overrides\/\d+)?\/extends$/,async(e,t)=>{const r=e;if("string"==typeof r)return c(t,r);(0,a.assertArray)(r);const i=[];for(const e of r)"string"==typeof e?i.push(await c(t,e)):i.push(n.builders.arrayExpression([await c(t,e[0]),n.builders.literal(e[1])]));return n.builders.arrayExpression(i)}])}},2770:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const i=r(18),n=r(2157),s=r(2202),a=(0,i.__importDefault)(r(2475)),o={"json-schema-2019-09":"json-schema-draft-2019-09","json-schema-2020-12":"json-schema-draft-2020-12"},l=Object.fromEntries(a.default.properties.formats.items.enum.map(e=>{var t;return[e,(null!==(t=o[e])&&void 0!==t?t:e).replace(/\.|(?<=[0-9])-(?=[0-9])/g,"_").replace(/-([0-9a-z])/g,(e,t)=>String(t).toUpperCase())]}));function u(e,t){return(0,s.assertArray)(e),n.builders.arrayExpression(Array.from(new Set(e.map(e=>((0,s.assertString)(e),t.tree.addImport(l[e],"@stoplight/spectral-formats"))))))}t.default=function(e){e.add([/^\/aliases\/[^/]+\/targets\/\d+\/formats$/,u]),e.add([/^(\/overrides\/\d+)?\/formats$/,u]),e.add([/^(\/overrides\/\d+)?\/rules\/[^/]+\/formats$/,u])}},2771:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const i=(0,r(18).__importStar)(r(288)),n=r(2202);t.default=function(e){e.add([/^$/,(e,t)=>{const r=e,{functionsDir:s,functions:a}=r;if(Array.isArray(a)&&a.length>0)for(const e of a){(0,n.assertString)(e);const r=t.tree.resolveModule(i.join("./","string"==typeof s?s:"functions",`./${e}.js`),t,"function"),a=i.basename(r,!0),o=t.tree.addImport(a,r,!0);t.tree.scope.store("function-"+a,o.name)}}]),e.add([/^\/functions$/,e=>((0,n.assertArray)(e),null)]),e.add([/^\/functionsDir$/,e=>((0,n.assertString)(e),null)])}},2772:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const i=r(18),n=r(2157),s=(0,i.__importStar)(r(2132)),a=(0,i.__importStar)(r(328)),o=r(35),l=r(2202),u=Object.keys(s),c={"operation-2xx-response":"operation-default-response","oas3-unused-components-schema":"oas3-unused-components","oas2-valid-parameter-example":"oas2-valid-schema-example","oas2-valid-response-schema-example":"oas2-valid-schema-example","oas2-valid-definition-example":"oas2-valid-schema-example","oas2-valid-response-example":"oas2-valid-media-example","oas3-valid-oas-parameter-example":"oas3-valid-media-example","oas3-valid-oas-content-example":"oas3-valid-media-example","oas3-valid-oas-header-example":"oas3-valid-media-example","oas3-valid-header-schema-example":"oas3-valid-schema-example","oas3-valid-parameter-schema-example":"oas3-valid-schema-example"},d={error:o.DiagnosticSeverity.Error,warn:o.DiagnosticSeverity.Warning,info:o.DiagnosticSeverity.Information,hint:o.DiagnosticSeverity.Hint,off:-1};function f(e,t){const r=p(e),i=p(t);return-1===i?e:r>i?t:e}function p(e){return Number.isNaN(Number(e))?d[e]:Number(e)}t.default=function(e){e.add([/^$/,e=>{var t;const r=e;if(void 0===r.rules)return;const{rules:i}=r;r.rules=(0,a.default)(i);const n=Object.keys(i);for(const[e,r]of n.entries()){if(!(r in c))continue;if("object"==typeof i[r])continue;const s=c[r];s in i?i[s]=f(String(i[r]),String(i[s])):null!==(t=i[s])&&void 0!==t||(i[s]=i[r]),n[e]=s,delete i[r]}(0,a.setOrder)(i,[...new Set([...n])])}]),e.add([/^\/rules\/[^/]+\/then\/(?:[0-9]+\/)?function$/,(e,t)=>{if((0,l.assertString)(e),u.includes(e))return t.tree.addImport(e,"@stoplight/spectral-functions");const r=t.tree.scope.load("function-"+e);return void 0!==r?n.builders.identifier(r):n.builders.unaryExpression("void",n.builders.literal(0))}])}},2824:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){e.add([/^$/,e=>{var t;const r=e,{except:i}=r;if(void 0===i)return;delete r.except;(null!==(t=r.overrides)&&void 0!==t?t:r.overrides=[]).push(...Object.keys(i).map(e=>({files:[e.startsWith("#")?"**"+e:e],rules:i[e].reduce((e,t)=>(e[t]="off",e),{})})))}])}},2825:function(e,t,r){"use strict";var i,n,s,a;Object.defineProperty(t,"__esModule",{value:!0}),t.Tree=t.Scope=void 0;const o=r(18),l=r(2157),u=(0,o.__importStar)(r(288)),c=(0,o.__importStar)(r(2826)),d=r(2827),f=r(2828),p=(0,o.__importDefault)(r(2829)),m=r(2831);Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return m.Scope}});const h=r(2833),v=r(2835);function y([e],[t]){return e.startsWith("@stoplight/")?t.startsWith("@stoplight/")?e.localeCompare(t):-1:t.startsWith("@stoplight/")?1:e.localeCompare(t)}function g({imported:e},{imported:t}){return e.name.localeCompare(t.name)}class _{constructor({format:e,npmRegistry:t,scope:r}){if(i.set(this,new Map),n.set(this,void 0),s.set(this,void 0),a.set(this,new Set),this.scope=r,(0,o.__classPrivateFieldSet)(this,n,null!=t?t:null,"f"),(0,o.__classPrivateFieldSet)(this,s,"commonjs"===e?d.commonjs:f.esm,"f"),"commonjs"===e&&null!==(0,o.__classPrivateFieldGet)(this,n,"f"))throw new Error("'npmRegistry' option must not be used with commonjs output format.")}addImport(e,t,r=!1){const n=(0,o.__classPrivateFieldGet)(this,i,"f").get(t),s=t.startsWith("@stoplight/")?this.scope.global:this.scope;if(void 0===n){const n=_.identifier(e,s);return(0,o.__classPrivateFieldGet)(this,i,"f").set(t,[{imported:l.builders.identifier(e),local:n,default:r}]),n}{for(const t of n)if(t.imported.name===e)return t.local;const t=_.identifier(e,s);return n.push({imported:l.builders.identifier(e),local:t,default:r}),t}}toString(){if(void 0===this.ruleset)throw new ReferenceError("Ruleset not assigned");return(0,o.__classPrivateFieldGet)(this,s,"f").dependencies.clear(),c.generate(l.builders.program([...Array.from((0,o.__classPrivateFieldGet)(this,i,"f").entries()).sort(y).flatMap(([e,t])=>{const r=null===(0,o.__classPrivateFieldGet)(this,n,"f")||(0,o.__classPrivateFieldGet)(this,a,"f").has(e)||e.startsWith((0,o.__classPrivateFieldGet)(this,n,"f"))?e:u.join((0,o.__classPrivateFieldGet)(this,n,"f"),e),i=t.filter(({default:e})=>!e).sort(g);return[...i.length>0?[(0,o.__classPrivateFieldGet)(this,s,"f").importDeclaration(i.map(({imported:e,local:t})=>[e,t]),r)]:[],...t.filter(({default:e})=>e).flatMap(({local:e})=>(0,o.__classPrivateFieldGet)(this,s,"f").importDefaultDeclaration(e,r))]}),(0,o.__classPrivateFieldGet)(this,s,"f").exportDefaultDeclaration(this.ruleset),...(0,o.__classPrivateFieldGet)(this,s,"f").dependencies]))}static identifier(e,t){const r=e.replace(/[^$_0-9A-Za-z]/g,"").replace(/^([0-9])/,"_$1");let i=r,n=0;for(;t.has(i);)i=`${r}$${n++}`;return t.add(i),l.builders.identifier(i)}resolveModule(e,t,r){var i;let n;return u.isURL(e)||u.isAbsolute(e)?(n=e,(0,o.__classPrivateFieldGet)(this,a,"f").add(e)):"ruleset"===r&&(0,h.isPackageImport)(e)?n=null!==t.npmRegistry?u.join(t.npmRegistry,e):null!==(i=null===p.default||void 0===p.default?void 0:(0,p.default)(e,{paths:[t.cwd]}))&&void 0!==i?i:u.join(t.cwd,e):null!==t.npmRegistry&&t.filepath.startsWith(t.npmRegistry)||(0,v.isKnownNpmRegistry)(t.filepath)?n=u.join(t.filepath,e):(n=u.join(t.filepath,"..",e),(0,o.__classPrivateFieldGet)(this,a,"f").add(n)),n}fork(){const e=this.scope.fork();return new Proxy(this,{get:(t,r)=>{if("scope"===r)return e;const i=Reflect.get(t,r,t);return"function"==typeof i?i.bind(t):i}})}}t.Tree=_,i=new WeakMap,n=new WeakMap,s=new WeakMap,a=new WeakMap},2827:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.commonjs=void 0;const i=r(2157),n=i.builders.identifier("ex"),s=i.builders.functionDeclaration(i.builders.identifier("_interopDefault"),[n],i.builders.blockStatement([i.builders.returnStatement(i.builders.conditionalExpression(i.builders.logicalExpression("&&",i.builders.logicalExpression("&&",n,i.builders.binaryExpression("===",i.builders.unaryExpression("typeof",n),i.builders.literal("object"))),i.builders.binaryExpression("in",i.builders.literal("default"),n)),i.builders.memberExpression(n,i.builders.literal("default"),!0),n))]));t.commonjs={dependencies:new Set,importDeclaration:(e,t)=>i.builders.variableDeclaration("const",[i.builders.variableDeclarator(i.builders.objectPattern(e.map(([e,t])=>i.builders.property.from({kind:"init",key:e,value:t,shorthand:t.name===e.name}))),i.builders.callExpression(i.builders.identifier("require"),[i.builders.literal(t)]))]),importDefaultDeclaration(e,t){return this.dependencies.add(s),i.builders.variableDeclaration("const",[i.builders.variableDeclarator(e,i.builders.callExpression(i.builders.identifier("_interopDefault"),[i.builders.callExpression(i.builders.identifier("require"),[i.builders.literal(t)])]))])},exportDefaultDeclaration:e=>i.builders.expressionStatement(i.builders.assignmentExpression("=",i.builders.memberExpression(i.builders.identifier("module"),i.builders.identifier("exports")),e))}},2828:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.esm=void 0;const i=r(2157);t.esm={dependencies:new Set,importDeclaration:(e,t)=>i.builders.importDeclaration(e.map(([e,t])=>i.builders.importSpecifier(e,t)),i.builders.literal(t)),importDefaultDeclaration:(e,t)=>i.builders.importDeclaration([i.builders.importDefaultSpecifier(e)],i.builders.literal(t)),exportDefaultDeclaration:e=>i.builders.exportDefaultDeclaration(e)}},2829:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e,t)=>{try{return r(2830).resolve(e,t)}catch{return null}}},2831:function(e,t,r){"use strict";var i,n,s;Object.defineProperty(t,"__esModule",{value:!0}),t.Scope=void 0;const a=r(18),o=[...(0,a.__importDefault)(r(2832)).default,"await","require","module","__dirname","__filename","_interopDefault"];let l=0;class u{constructor(e=null){i.set(this,void 0),n.set(this,void 0),s.set(this,void 0),this.id=l++,(0,a.__classPrivateFieldSet)(this,i,e,"f"),(0,a.__classPrivateFieldSet)(this,n,null===e?new Set(o):new Set,"f"),(0,a.__classPrivateFieldSet)(this,s,new Map,"f")}get global(){return null===(0,a.__classPrivateFieldGet)(this,i,"f")?this:(0,a.__classPrivateFieldGet)(this,i,"f").global}has(e){var t,r;return null!==(r=null===(t=(0,a.__classPrivateFieldGet)(this,i,"f"))||void 0===t?void 0:t.has(e))&&void 0!==r?r:(0,a.__classPrivateFieldGet)(this,n,"f").has(e)}add(e){var t;(0,a.__classPrivateFieldGet)(this,n,"f").add(e),null===(t=(0,a.__classPrivateFieldGet)(this,i,"f"))||void 0===t||t.add(e)}store(e,t){(0,a.__classPrivateFieldGet)(this,s,"f").set(e,t)}load(e){return(0,a.__classPrivateFieldGet)(this,s,"f").get(e)}fork(){return new u(this)}}t.Scope=u,i=new WeakMap,n=new WeakMap,s=new WeakMap},2833:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPackageImport=void 0;const i=(0,r(18).__importDefault)(r(2483)),n=e=>(0,i.default)(e).validForNewPackages;t.isPackageImport=e=>{const t=e.split("/");return e.startsWith("@")&&t.length>=2&&t.splice(0,2,`${t[0]}/${t[1]}`),t.every(n)}},2835:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isKnownNpmRegistry=void 0;const i=r(288),n=["unpkg.com","cdn.skypack.dev"];t.isKnownNpmRegistry=function(e){const{protocol:t,origin:r}=(0,i.parse)(e);return null!==r&&(("http"===t||"https"===t)&&n.includes(r))}}}]);